<!DOCTYPE html> 
<html lang="sv">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>GhostGrid – Väggen</title>
  <link rel="stylesheet" href="style.css" />
  <style>
    body { background: #0a0a0a; color: #e0ffff; font-family: 'Courier New', monospace; min-height: 100vh; margin: 0; padding-top: 85px; position: relative; overflow-x: hidden;}
    .glow-left, .glow-right { position: fixed; top: 0; width: 136px; height: 100vh; pointer-events: none; z-index: 0; }
    .glow-left { left: 0; background: radial-gradient(circle at left, #d900ff 0%, #7200ffcc 40%, transparent 85%); box-shadow: 0 0 60px 30px #d900ffbb, 0 0 180px 60px #00ffe0aa, 0 0 320px 90px #9400ff66; }
    .glow-right { right: 0; background: radial-gradient(circle at right, #d900ff 0%, #7200ffcc 40%, transparent 85%); box-shadow: 0 0 60px 30px #d900ffbb, 0 0 180px 60px #00ffe0aa, 0 0 320px 90px #9400ff66; }
    .side-banner { position: fixed; top: 87px; bottom: 0; width: 136px; display: flex; flex-direction: column; justify-content: flex-start; align-items: center; z-index: 1002; background: none; pointer-events: none; }
    .side-banner .banner-inner { width: 120px; height: 100%; background: transparent; border-radius: 12px; box-shadow: 0 0 18px #7b00ff99; overflow: hidden; display: flex; flex-direction: column; align-items: center; pointer-events: auto; }
    .side-banner img { width: 100%; height: 100%; object-fit: cover; border-radius: 10px; background: #220043; cursor: pointer; transition: box-shadow 0.3s; box-shadow: 0 0 10px #8800ff70; pointer-events: auto; min-height: 200px; }
    .side-banner.left { left: 0; } .side-banner.right { right: 0; }
    @media (max-width: 1100px) { .side-banner, .glow-left, .glow-right { width: 65px; } .side-banner .banner-inner { width: 57px; } }
    @media (max-width: 700px) { .side-banner, .glow-left, .glow-right { display: none; } }
    nav.navbar { background-color: #000; border-bottom: 2px solid #00ffcc; padding: 12px 0; position: fixed; width: 100%; top: 0; z-index: 1000; box-shadow: 0 0 20px #bb00ff; display: flex; justify-content: center; transition: top 0.3s; }
    .nav-content { display: flex; justify-content: center; flex-wrap: wrap; gap: 16px; max-width: 900px; width: 100%; align-items: center; text-align: center; }
    .nav-content a { color: white; text-decoration: none; font-size: 1.2em; padding: 7px 10px; border-radius: 4px; text-shadow: 0 0 8px #00ffcc, 0 0 6px #bb00ff; transition: 0.3s; }
    .nav-content a:hover { background-color: #00ffcc; color: #000; box-shadow: 0 0 10px #ffffff; }
    .search-container { width: 210px; display: flex; justify-content: center; margin-left: 12px;}
    .search-container input { padding: 8px 14px; font-size: 1.05em; background-color: #111; border: 2px solid #00ffcc; border-radius: 8px; color: #fff; box-shadow: 0 0 8px #7b00ff, 0 0 3px #00ffcc; text-shadow: 0 0 2px #7b00ff, 0 0 2px #00ffcc; width: 100%; max-width: 230px;}
    .hamburger { display: none; flex-direction: column; justify-content: center; cursor: pointer; margin-left: 10px; }
    .hamburger span { width: 29px; height: 4px; background: #00ffcc; margin: 4px 0; border-radius: 2px; transition: 0.3s; }
    @media (max-width: 700px) {
      .nav-content { display: none; flex-direction: column; position: fixed; left: 0; right: 0; top: 58px; background: #181f26; box-shadow: 0 4px 28px #00ffcc77; z-index: 1101; padding-bottom: 20px; gap: 0; }
      .nav-content.show { display: flex; }
      .nav-content a { padding: 18px 10px; font-size: 1.15em; width: 100vw; border-radius: 0; text-align: center; border-bottom: 1px solid #3fffd966;}
      .search-container { margin: 10px auto 0 auto; width: 90vw; }
      .search-container input { width: 100%; max-width: 100vw;}
      .hamburger { display: flex; }
    }
    @media (max-width: 600px) { nav.navbar { transition: top 0.3s; } nav.navbar.hide-navbar { top: -70px; } .wall-title { font-size: 1.6em; } .wall-box { padding: 14px 2vw 12px 2vw; max-width: 99vw; margin: 18px 0 18px 0; border-radius: 10px;} }
    .wall-box { border: 2px solid #66ffcc; border-radius: 12px; padding: 30px 20px 22px 20px; margin: 36px auto 32px auto; max-width: 550px; background-color: rgba(0, 0, 0, 0.88); box-shadow: 0 0 15px #00ffcc33; position: relative; z-index: 2; min-width: 0;}
    .wall-title { font-size: 2.6em; text-align: center; color: #f5f5f5; margin: 16px 0 28px 0; text-shadow: 0 2px 12px #222, 0 1px 0 #fff; font-weight: bold; letter-spacing: 0.04em; }
    .filter-row { display: flex; justify-content: center; gap: 10px; flex-wrap: wrap; margin-bottom: 18px;}
    .filter-btn { padding: 7px 16px; border-radius: 5px; border: 2px solid #00ffcc; background: #121e2a; color: #00ffcc; font-family: inherit; font-size: 1em; cursor: pointer; box-shadow: 0 0 8px #00ffcc66; transition: 0.2s; margin-bottom: 4px;}
    .filter-btn.active, .filter-btn:hover { background: #00ffcc; color: #19191b; font-weight: bold; box-shadow: 0 0 12px #00ffcc; }
    .post-list { width:100%; max-width:550px; margin:24px auto;}
    .post { background: #181f26; border: 1.5px solid #66ffcc; border-radius: 9px; box-shadow: 0 0 10px #00ffcc30; margin-bottom: 24px; padding: 18px 13px; color: #e0ffff; word-break: break-word; overflow: auto; }
    .post .post-header { font-size: 1em; color: #00ffd9; margin-bottom: 6px;}
    .post .post-content { font-size: 1.19em;}
    .post .post-time { color: #9df; font-size: 0.91em; margin-top: 6px;}
    .post img, .post video, .post audio { max-width: 100%; border-radius: 7px; margin-top: 7px;}
    .emoji-row { margin: 7px 0 3px 0; display: flex; flex-wrap: wrap; gap: 7px; }
    .emoji-btn { background: none; border: none; font-size: 1.36em; cursor: pointer; transition: filter 0.1s; }
    .emoji-btn.selected, .emoji-btn:hover { filter: brightness(1.3) drop-shadow(0 0 5px #00ffcc); }
    .reactions-view { margin-left: 6px; font-size: 1.18em;}
    .comments-block { margin-top: 13px; padding-top: 13px; border-top: 1px solid #333; }
    .comment { margin-bottom: 11px; border-radius: 5px; background: #141923; padding: 8px 9px 6px 9px; }
    .comment .comment-meta { color: #00ffd9; font-size: 0.96em; }
    .comment .comment-text { margin: 4px 0 2px 0;}
    .comment .emoji-row { margin-top: 1px;}
    .comment-actions { font-size: 0.9em; color: #8ef; margin-top: 2px;}
    .comment-actions a { margin-right: 9px; color: #00ccff; text-decoration: underline; cursor: pointer;}
    .comment-actions a:hover { color: #00ffcc; }
  </style>
</head>
<body>
  <div class="glow-left"></div>
  <div class="glow-right"></div>
  <div class="side-banner left">
    <div class="banner-inner">
      <a id="leftBannerLink" href="#" target="_blank">
        <img id="leftBannerImg" src="https://dummyimage.com/120x1800/7b00ff/fff&text=Reklam+1" alt="Reklam" />
      </a>
    </div>
  </div>
  <div class="side-banner right">
    <div class="banner-inner">
      <a id="rightBannerLink" href="#" target="_blank">
        <img id="rightBannerImg" src="https://dummyimage.com/120x1800/222299/fff&text=Reklam+2" alt="Reklam" />
      </a>
    </div>
  </div>
  <nav class="navbar">
    <div class="hamburger" id="hamburgerBtn" aria-label="Meny" tabindex="0">
      <span></span><span></span><span></span>
    </div>
    <div class="nav-content" id="navMenu">
      <a href="forum.html" data-i18n="forum">Forum</a>
      <a href="store.html" data-i18n="store">Store</a>
      <a href="wall.html" data-i18n="wall">Väggen</a>
      <a href="upload.html" data-i18n="upload">Ladda upp</a>
      <a href="profile.html" data-i18n="profile">Profil</a>
      <a href="friends.html" data-i18n="friends">Vänner</a>
      <div class="search-container">
        <input type="text" placeholder="" id="searchInput" />
      </div>
    </div>
  </nav>
  <div class="wall-box">
    <div class="wall-title" data-i18n="wall_title">Väggen</div>
    <div class="filter-row" id="filterRow">
      <button class="filter-btn active" data-type="all" data-i18n="all">Alla</button>
      <button class="filter-btn" data-type="text" data-i18n="post">Inlägg</button>
      <button class="filter-btn" data-type="image" data-i18n="image">Bilder</button>
      <button class="filter-btn" data-type="video" data-i18n="video">Klipp</button>
      <button class="filter-btn" data-type="audio" data-i18n="audio">Ljud</button>
      <button class="filter-btn" data-type="mic" data-i18n="mic">Röst</button>
    </div>
    <div id="postList" class="post-list"></div>
  </div>
  <script>
    // --- SIDBANNER ROTATION ---
    const banners = [
      { left: { src: "https://dummyimage.com/120x1800/7b00ff/fff&text=Reklam+1", alt: "Reklam Banner 1", url: "#" }, right: { src: "https://dummyimage.com/120x1800/222299/fff&text=Reklam Banner 2", alt: "Reklam Banner 2", url: "#" }},
      { left: { src: "https://dummyimage.com/120x1800/ff0088/fff&text=Bli+medlem!", alt: "Bli medlem", url: "register.html" }, right: { src: "https://dummyimage.com/120x1800/0077ff/fff&text=Annonsera+Här", alt: "Annonsera", url: "#" }}
    ];
    let bannerIndex = 0;
    function updateBanners() {
      const left = banners[bannerIndex].left, right = banners[bannerIndex].right;
      document.getElementById('leftBannerImg').src = left.src; document.getElementById('leftBannerImg').alt = left.alt; document.getElementById('leftBannerLink').href = left.url;
      document.getElementById('rightBannerImg').src = right.src; document.getElementById('rightBannerImg').alt = right.alt; document.getElementById('rightBannerLink').href = right.url;
    }
    updateBanners(); setInterval(() => { bannerIndex = (bannerIndex + 1) % banners.length; updateBanners(); }, 6000);

    // --- HAMBURGERMENY ---
    const hamburgerBtn = document.getElementById('hamburgerBtn');
    const navMenu = document.getElementById('navMenu');
    hamburgerBtn.addEventListener('click', function() { navMenu.classList.toggle('show'); });
    navMenu.querySelectorAll('a').forEach(link => { link.addEventListener('click', () => { navMenu.classList.remove('show'); }); });

    // --- SÖK ---
    document.addEventListener("DOMContentLoaded", () => {
      const searchInput = document.getElementById("searchInput");
      searchInput.placeholder = (localStorage.lang === "en" ? "Search the whole site..." : "Sök på hela sidan...");
      if (searchInput) {
        searchInput.addEventListener("keydown", (e) => {
          if (e.key === "Enter") {
            e.preventDefault();
            const query = searchInput.value.trim();
            if (query.length >= 2) window.location.href = search.html?q=${encodeURIComponent(query)};
          }
        });
      }
    });

    // --- NAVBAR HIDE VID SCROLL PÅ MOBIL ---
    if (window.innerWidth <= 600) {
      let lastScrollY = window.scrollY;
      let navbar = document.querySelector('.navbar');
      window.addEventListener('scroll', function () {
        if (window.scrollY > lastScrollY && window.scrollY > 70) { navbar.classList.add('hide-navbar'); } else { navbar.classList.remove('hide-navbar'); }
        lastScrollY = window.scrollY;
      });
    }

    // --- TRANSLATIONS ---
    const translations = {
      sv: {
        forum: "Forum", store: "Butik", wall: "Väggen", upload: "Ladda upp", profile: "Profil", friends: "Vänner",
        wall_title: "Väggen",
        all: "Alla", post: "Inlägg", image: "Bilder", video: "Klipp", audio: "Ljud", mic: "Röst",
        loading: "Laddar inlägg...",
        no_posts: "Inga inlägg hittades.",
        user: "Användare", comment: "Kommentera", comment_placeholder: "Kommentera...", login_to_comment: "Logga in för att kommentera.",
        edit: "Redigera", delete: "Radera", save: "Spara", cancel: "Avbryt",
        guest: "Gäst", at: "kl", comment_deleted: "Kommentaren har raderats.",
        max_200: "Max 200 tecken per kommentar!", no_spam: "Du kan inte spamma!", wait: "Vänta några sekunder innan du kommenterar igen.",
        login_to_react: "Logga in för att reagera.", comment_empty: "Kommentaren får ej vara tom.", delete_confirm: "Radera kommentaren?", all_fields: "Alla fält måste fyllas i."
      },
      en: {
        forum: "Forum", store: "Store", wall: "Wall", upload: "Upload", profile: "Profile", friends: "Friends",
        wall_title: "Wall",
        all: "All", post: "Posts", image: "Images", video: "Videos", audio: "Audio", mic: "Voice",
        loading: "Loading posts...",
        no_posts: "No posts found.",
        user: "User", comment: "Comment", comment_placeholder: "Comment...", login_to_comment: "Login to comment.",
        edit: "Edit", delete: "Delete", save: "Save", cancel: "Cancel",
        guest: "Guest", at: "at", comment_deleted: "Comment deleted.",
        max_200: "Max 200 characters per comment!", no_spam: "You can't spam!", wait: "Wait a few seconds before commenting again.",
        login_to_react: "Login to react.", comment_empty: "Comment cannot be empty.", delete_confirm: "Delete this comment?", all_fields: "All fields are required."
      }
    };
    function t(key) {
      const lang = localStorage.lang === "en" ? "en" : "sv";
      return translations[lang][key] || key;
    }
    function applyTranslations() {
      document.querySelectorAll("[data-i18n]").forEach(el => { el.textContent = t(el.getAttribute("data-i18n")); });
      document.title = "GhostGrid – " + t("wall");
      document.querySelector(".wall-title").textContent = t("wall_title");
    }
    applyTranslations();

    // --- FIREBASE LOGIK ---
  </script>
  <script type="module">
    import { auth, db } from "./scripts/firebase-init.js";
    import { collection, query, orderBy, getDocs, doc, setDoc, getDoc, addDoc, deleteDoc, updateDoc } from "https://www.gstatic.com/firebasejs/11.8.1/firebase-firestore.js";
    import { onAuthStateChanged } from "https://www.gstatic.com/firebasejs/11.8.1/firebase-auth.js";

    // --- EMOJIS
    const emojis = [
      { emoji: "👍", key: "thumbsup" }, { emoji: "👎", key: "thumbsdown" },
      { emoji: "🙂", key: "smile" }, { emoji: "😃", key: "bigsmile" },
      { emoji: "😂", key: "laugh" }, { emoji: "😕", key: "confused" },
      { emoji: "🙁", key: "sad" }, { emoji: "😢", key: "cry" },
      { emoji: "😡", key: "angry" }, { emoji: "😳", key: "embarrassed" }, { emoji: "😇", key: "angel" }
    ];
    let currentUser = null;
    let userMap = {}; // uid -> displayName/smeknamn

    // Hämta alla användare (snabb förnamn-lookup)
    async function fetchUsers() {
      const q = query(collection(db, "profiles"));
      const snap = await getDocs(q);
      snap.docs.forEach(docu => userMap[docu.id] = docu.data().nickname || docu.data().displayName || t("guest"));
    }
    // --- LADDA OCH VISA POSTER ---
    const filterRow = document.getElementById("filterRow");
    const postList = document.getElementById("postList");
    let allPosts = [];

    async function loadWallPosts() {
      postList.innerHTML = <div style="color:#00ffcc; text-align:center;">${t("loading")}</div>;
      await fetchUsers();
      const q = query(collection(db, "wall"), orderBy("createdAt", "desc"));
      const snapshot = await getDocs(q);
      allPosts = snapshot.docs.map(doc => ({ ...doc.data(), id: doc.id }));
      renderPosts("all");
    }
    function escapeHTML(str) {
      if (!str) return "";
      return str.replace(/[<>&"]/g, c => ({ '<': '&lt;', '>': '&gt;', '&': '&amp;', '"': '&quot;' }[c]));
    }
    function formatPostContent(post) {
      switch (post.type) {
        case "text": return <div class="post-content">${escapeHTML(post.text)}</div>;
        case "image": return post.imageUrl ? <img src="${post.imageUrl}" alt="Bild" /> : "";
        case "video": return post.videoUrl ? <video controls src="${post.videoUrl}"></video> : "";
        case "audio": return post.audioUrl ? <audio controls src="${post.audioUrl}"></audio> : "";
        case "mic": return post.micAudioUrl ? <audio controls src="${post.micAudioUrl}"></audio> : "";
        default: return "";
      }
    }
    async function renderPosts(type) {
      let posts = type === "all" ? allPosts : allPosts.filter(p => p.type === type);
      if (!posts.length) { postList.innerHTML = <div style='color:#00ffcc; text-align:center;'>${t("no_posts")}</div>; return; }
      postList.innerHTML = "";
      for (let post of posts) {
        const reactions = await loadReactions(post.id, "reactions");
        const comments = await loadComments(post.id);
        const userReaction = currentUser ? reactions.find(r => r.user === currentUser.uid) : null;
        let name = userMap[post.user] || t("guest");
        postList.innerHTML += 
          <div class="post" data-postid="${post.id}">
            <div class="post-header">${t("user")}: ${name}</div>
            ${formatPostContent(post)}
            <div class="emoji-row">${emojis.map(e =>
              <button class="emoji-btn${userReaction && userReaction.emoji === e.key ? " selected" : ""}" data-emoji="${e.key}" title="${e.emoji}">${e.emoji}</button>
            ).join("")}
            <span class="reactions-view">${emojiSummary(reactions)}</span>
            </div>
            <div class="post-time">${post.createdAt && post.createdAt.toDate ? post.createdAt.toDate().toLocaleString(localStorage.lang === "en" ? "en-GB" : "sv-SE") : ""}</div>
            <div class="comments-block">
              <div class="comment-list">${comments.map(c => renderComment(post.id, c)).join("")}</div>
              ${currentUser ? <form class="add-comment-form" data-postid="${post.id}">
                <textarea rows="1" placeholder="${t("comment_placeholder")}" maxlength="200"></textarea>
                <button type="submit">${t("comment")}</button>
              </form> : <div style="color:#00ffcc; margin:4px 0;">${t("login_to_comment")}</div>}
            </div>
          </div>
        ;
      }
      addEventListeners();
    }
    // Reaction helpers
    async function loadReactions(postId, subcol) {
      const q = query(collection(db, "wall", postId, subcol));
      const snap = await getDocs(q);
      return snap.docs.map(doc => doc.data());
    }
    function emojiSummary(reactions) {
      if (!reactions || reactions.length === 0) return "";
      let counts = {};
      reactions.forEach(r => counts[r.emoji] = (counts[r.emoji] || 0) + 1);
      return Object.entries(counts).map(([k, v]) => ${emojis.find(e => e.key === k)?.emoji || ""} ${v}).join(" ");
    }
    // Kommentar helpers
    async function loadComments(postId) {
      const q = query(collection(db, "wall", postId, "comments"), orderBy("createdAt", "asc"));
      const snap = await getDocs(q);
      return snap.docs.map(doc => ({ id: doc.id, ...doc.data() }));
    }
    function renderComment(postId, c) {
      let name = userMap[c.userId] || t("guest");
      return 
        <div class="comment" data-commentid="${c.id}" data-postid="${postId}">
          <div class="comment-meta">${name} – ${c.createdAt && c.createdAt.toDate ? c.createdAt.toDate().toLocaleString(localStorage.lang === "en" ? "en-GB" : "sv-SE") : ""}</div>
          <div class="comment-text">${escapeHTML(c.text)}</div>
          <div class="emoji-row">${emojis.map(e =>
            <button class="emoji-btn${c.userReaction === e.key ? " selected" : ""}" data-emoji="${e.key}" title="${e.emoji}">${e.emoji}</button>
          ).join("")}</div>
          <div class="comment-actions">
            ${currentUser && currentUser.uid === c.userId ?
              <a href="#" class="edit-comment">${t("edit")}</a> <a href="#" class="delete-comment">${t("delete")}</a> : ""}
          </div>
        </div>;
    }

    // --- Eventlisteners
    function addEventListeners() {
      // Emoji på post
      document.querySelectorAll(".post .emoji-btn").forEach(btn => {
        btn.onclick = async function() {
          if (!currentUser) return alert(t("login_to_react"));
          const postId = this.closest(".post").dataset.postid;
          const emojiKey = this.dataset.emoji;
          const ref = doc(db, "wall", postId, "reactions", currentUser.uid);
          const snap = await getDoc(ref);
          if (snap.exists() && snap.data().emoji === emojiKey) {
            await deleteDoc(ref);
          } else {
            await setDoc(ref, { emoji: emojiKey, user: currentUser.uid });
          }
          loadWallPosts();
        };
      });
      // Kommentar-submit
      document.querySelectorAll(".add-comment-form").forEach(form => {
        form.onsubmit = async function(e) {
          e.preventDefault();
          const textarea = this.querySelector("textarea");
          const text = textarea.value.trim();
          if (text.length === 0) return alert(t("comment_empty"));
          if (text.length > 200) return alert(t("max_200"));
          const postId = this.dataset.postid;
          const comments = await loadComments(postId);
          if (comments.length > 0 && comments[comments.length-1].userId === currentUser.uid && comments[comments.length-1].text === text) return alert(t("no_spam"));
          const now = Date.now();
          if (window.lastCommentTime && now - window.lastCommentTime < 15000) return alert(t("wait"));
          await addDoc(collection(db, "wall", postId, "comments"), {
            text, user: currentUser.displayName || currentUser.email || "?", userId: currentUser.uid, createdAt: new Date()
          });
          window.lastCommentTime = now;
          textarea.value = "";
          loadWallPosts();
        };
      });
      // Emoji på kommentar (per user)
      document.querySelectorAll(".comment .emoji-btn").forEach(btn => {
        btn.onclick = async function() {
          if (!currentUser) return alert(t("login_to_react"));
          const commentDiv = this.closest(".comment");
          const postId = commentDiv.dataset.postid;
          const commentId = commentDiv.dataset.commentid;
          const emojiKey = this.dataset.emoji;
          const ref = doc(db, "wall", postId, "comments", commentId, "reactions", currentUser.uid);
          const snap = await getDoc(ref);
          if (snap.exists() && snap.data().emoji === emojiKey) {
            await deleteDoc(ref);
          } else {
            await setDoc(ref, { emoji: emojiKey, user: currentUser.uid });
          }
          loadWallPosts();
        };
      });
      // Edit/radera egna kommentarer
      document.querySelectorAll(".edit-comment").forEach(link => {
        link.onclick = function(e) {
          e.preventDefault();
          const commentDiv = this.closest(".comment");
          const postId = commentDiv.dataset.postid;
          const commentId = commentDiv.dataset.commentid;
          const textDiv = commentDiv.querySelector(".comment-text");
          const oldText = textDiv.textContent;
          textDiv.innerHTML = <input value="${escapeHTML(oldText)}" style="width:80%" /> <button>${t("save")}</button>;
          textDiv.querySelector("button").onclick = async function() {
            const newText = textDiv.querySelector("input").value.trim();
            if (newText.length === 0) return alert(t("comment_empty"));
            await updateDoc(doc(db, "wall", postId, "comments", commentId), { text: newText });
            loadWallPosts();
          };
        };
      });
      document.querySelectorAll(".delete-comment").forEach(link => {
        link.onclick = async function(e) {
          e.preventDefault();
          const commentDiv = this.closest(".comment");
          const postId = commentDiv.dataset.postid;
          const commentId = commentDiv.dataset.commentid;
          if (confirm(t("delete_confirm"))) {
            await deleteDoc(doc(db, "wall", postId, "comments", commentId));
            loadWallPosts();
          }
        };
      });
    }
    // För filterknappar
    filterRow.addEventListener("click", (e) => {
      if (e.target.classList.contains("filter-btn")) {
        filterRow.querySelectorAll(".filter-btn").forEach(btn => btn.classList.remove("active"));
        e.target.classList.add("active");
        renderPosts(e.target.getAttribute("data-type"));
      }
    });

    // Inloggning
    onAuthStateChanged(auth, user => {
      currentUser = user;
      loadWallPosts();
    });
  </script>
</body>
</html
